<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: handlebars.filter/handlebars.filter.js</title>

    <script src="scripts/jquery-1.11.2.min.js"> </script>
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>

    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
<div class="header">
    <h1 class="page-title"><small>Source</small> handlebars.filter/handlebars.filter.js</h1>
</div>
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>(function (moduleFactory) {
    if (typeof exports === "object") {
        module.exports = moduleFactory(require("markdown"));
    } else if(typeof define === "function" &amp;&amp; define.amd) {
        define(["markdown"], moduleFactory);
    }
}(function (Markdown) {
/**
 * @module handlebars%filter
 * @description  Provides helpers and methods to filter content
 * 
 *     var Handlebars = require("handlebars");
 *     var Filter = require("handlebars.filter");
 *     Filter.registerHelper(Handlebars);
 * 
 * @returns {object} Filter instance
 */
    var Handlebars;

    var locale = "default";

    var filterRegister = {};
    /**
     * @template  uppercase
     * @block filter
     * @param {string} str
     * @description Transforms output to uppercase
     */
    filterRegister.uppercase = function (str) {
        return str ? str.toUpperCase() : str;
    };
    /**
     * @template  lowercase
     * @block filter
     * @param {string} str
     * @description Transforms output to lowercase
     */
    filterRegister.lowercase = function (str) {
        return str ? str.toLowerCase() : str;
    };
    //filterRegister.camelcase = function (str) {
    //    return str.toLowerCase();
    //};
    /**
     * @template  capitalize
     * @block filter
     * @param {string} str
     * @param {object} [options]
     * @description Capitalizes output
     */
    filterRegister.capitalize = function (str, options) {
        if (!str) {
            return str;
        }
        if (options.hash.respect === false) {
            str = str.toLowerCase();
        }
        var words = str.split(" ");
        var capitalize = function() {
            return arguments[1].toUpperCase();
        };
        for (var word in words) {
            words[word] = words[word].replace(/^(["']*.)/, capitalize);
        }
        return words.join(" ");
    };

    /**
     * @template  titlecase
     * @block filter
     * @param {string} str
     * @description Transforms output to titlecase
     */
    filterRegister.titlecase = (function (){
        var small = "(a|an|and|as|at|but|by|en|for|if|in|of|on|or|the|to|v[.]?|via|vs[.]?)";
        var punct = "([!\"#$%&amp;'()*+,./:;&lt;=>?@[\\\\\\]^_`{|}~-]*)";

        var titleCaps = function (title) {
            if (!title) {
                return title;
            }
            var parts = [],
                split = /[:.;?!] |(?: |^)["Ò]/g,
                index = 0;

            var upperAll = function (all){
                return (/[A-Za-z]\.[A-Za-z]/).test(all) ? all : upper(all);
            };

            var upperPunct = function (all, punct, word){
                return punct + upper(word);
            };

            while (true) {
                var m = split.exec(title);

                parts.push( title.substring(index, m ? m.index : title.length)
                    .replace(/\b([A-Za-z][a-z.'Õ]*)\b/g, upperAll)
                    .replace(RegExp("\\b" + small + "\\b", "ig"), lower)
                    .replace(RegExp("^" + punct + small + "\\b", "ig"), upperPunct)
                    .replace(RegExp("\\b" + small + punct + "$", "ig"), upper));

                index = split.lastIndex;

                if (m) {
                    parts.push(m[0]);
                } else {
                    break;
                }
            }

            return parts.join("").replace(/ V(s?)\. /ig, " v$1. ")
                .replace(/(['Õ])S\b/ig, "$1s")
                .replace(/\b(AT&amp;T|Q&amp;A)\b/ig, function(all){
                    return all.toUpperCase();
                });
        };

        function lower (word){
            return word.toLowerCase();
        }

        function upper (word){
          return word.substr(0,1).toUpperCase() + word.substr(1);
        }

        return titleCaps;
    })();

    /**
     * @template  markdown
     * @block filter
     * @param {string} str
     * @description Parses output as markdown
     */
    filterRegister.markdown = function (str) {
        if (!str) {
            return str;
        } 
        return Markdown.parse(str);
    };

    var FilterHelper = function () {
        /**
         * @template filter
         * @block helper
         * @description  Transforms content using named filter method
         *
         * Apply a filter to content
         * 
         *     {{filter str filtername}}
         *
         * Apply a filter to captured content
         * 
         *     {{#filter filtername}}{{str}}{{/filter}}
         *
         * Apply chained filters to content
         * 
         *     {{filter str filter1 filter2}}
         *
         * Apply lowercase filter
         * 
         *     {{filter str "lowercase"}}
         *
         * See {@link template:lowercase}
         *
         * Apply uppercase filter
         * 
         *     {{filter str "uppercase"}}
         *
         * See {@link template:uppercase}
         *
         * Apply capitalize filter
         * 
         *     {{filter str "capitalize"}}
         *
         * See {@link template:capitalize}
         *
         * Apply capitalize filter overriding any existing casing
         * 
         *     {{filter str "capitalize" respect=false}}
         *
         * Apply titlecase filter
         * 
         *     {{filter str "titlecase"}}
         *
         * See {@link template:titlecase}
         *
         * Apply markdown filter
         * 
         *     {{filter str "markdown"}}
         *
         * See {@link template:markdown}
         *
         */
        Handlebars.registerHelper("filter", function() {
            var args = Array.prototype.slice.call(arguments),
                options = args.pop(),
                str;
            options.hash = options.hash || {};

            if (args.length > 1 &amp;&amp; !filterRegister[args[0]]) {
                // allow calls like {{filter content filterName}}
                str = args.shift();
            } else {
                // otherwise {{#filter filterName anotherFilter }}content{{/filter}}
                str = options.fn(this);
            }
            for (var arg in args) {
                if (filterRegister[args[arg]]) {
                    str = filterRegister[args[arg]](str, options);
                }
            }
            return str;
        });
    };

    var Filter = (function () {
        var external = {
            /**
             * @method locale
             * @static
             * @param {string} [loc] Locale to switch to
             * @description Get or set default locale used by Filter
             *
             * If called without loc parameter, returns locale
             *
             * If called with loc parameter, sets locale
             *
             * @returns {string} Filter’s locale
             */
            locale: function (loc) {
                if (loc) {
                    locale = loc;
                }
                return locale;
            },
            /**
             * @method registerFilter
             * @static
             * @param {string} name Name of filter
             * @param {function} fn Filter function
             * @description Add filter to Filter
             */
            registerFilter: function (name, fn) {
                filterRegister[name] = fn;
            },
            /**
             * @method unregisterFilter
             * @static
             * @param {string} name Name of filter
             * @description Remove filter from Filter
             */
            unregisterFilter: function (name) {
                delete filterRegister[name];
            },
            /**
             * @method registerHelper
             * @static
             * @param {object} hbars [description]
             * @description Register Filter helper with Handlebars
             *
             * - {@link template:filter}
             */
            registerHelper: function (hbars) {
                Handlebars = hbars;
                FilterHelper();
            }

        };
        return external;
    })();

    return Filter;
}));</code></pre>
        </article>
    </section>




</div>

<nav>
<div class="navwrapout">
    <div class="navwrap"><h2><a href="index.html">larynx</a></h2><div class="navsection"><h3 class="modules">Modules</h3><ul><li><a href="module-handlebars%2525choice.html">handlebars.choice</a></li><li><a href="module-handlebars%2525el.html">handlebars.el</a></li><li><a href="module-handlebars%2525el%2525form.html">handlebars.el.form</a></li><li><a href="module-handlebars%2525filter.html">handlebars.filter</a></li><li><a href="module-handlebars%2525moment.html">handlebars.moment</a></li><li><a href="module-handlebars%2525numeral.html">handlebars.numeral</a></li><li><a href="module-handlebars%2525phrase.html">handlebars.phrase</a></li><li><a href="module-larynx.html">larynx</a></li></ul></div><div class="navsection"><h3 class="template-helpers">Template helpers</h3><ul><li><a href="template-byte.html">byte</a></li><li><a href="template-choice.html">choice</a></li><li><a href="template-choose.html">choose</a></li><li><a href="template-currency.html">currency</a></li><li><a href="template-duration.html">duration</a></li><li><a href="template-el.html">el</a></li><li><a href="template-el-checkbox.html">el-checkbox</a></li><li><a href="template-el-field.html">el-field</a></li><li><a href="template-el-fieldset.html">el-fieldset</a></li><li><a href="template-el-file.html">el-file</a></li><li><a href="template-el-form.html">el-form</a></li><li><a href="template-el-hidden.html">el-hidden</a></li><li><a href="template-el-label.html">el-label</a></li><li><a href="template-el-message.html">el-message</a></li><li><a href="template-el-password.html">el-password</a></li><li><a href="template-el-radio.html">el-radio</a></li><li><a href="template-el-select.html">el-select</a></li><li><a href="template-el-submit.html">el-submit</a></li><li><a href="template-el-text.html">el-text</a></li><li><a href="template-el-textarea.html">el-textarea</a></li><li><a href="template-filter.html">filter</a></li><li><a href="template-moment.html">moment</a></li><li><a href="template-number.html">number</a></li><li><a href="template-numeral.html">numeral</a></li><li><a href="template-ordinal.html">ordinal</a></li><li><a href="template-phrase.html">phrase</a></li></ul></div><div class="navsection"><h3 class="template-filters">Template filters</h3><ul><li><a href="template-capitalize.html">capitalize</a></li><li><a href="template-lowercase.html">lowercase</a></li><li><a href="template-markdown.html">markdown</a></li><li><a href="template-titlecase.html">titlecase</a></li><li><a href="template-uppercase.html">uppercase</a></li></ul></div></div>
    <div class="external-links">
      <p class="github"><a href="https://github.com/solidgoldpig/larynx" title="View larynx on Github"><span>View on </span> Github</a></p>
      <p class="codesite"><a href="http://code.solidgoldpig.com" title="View other Solidgoldpig projects">Solidgoldpig code</a></p>
    </div>
</div>
</nav>


<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
